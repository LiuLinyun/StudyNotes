# 各种决策树

决策树算法的基本流程如下：
___________________
**输入**：训练集 $D = \{(\boldsymbol x_1,y_1),(\boldsymbol x_2,y_2,\dots,(\boldsymbol x_m,y_m)\}$；
$\quad\quad$ 属性集 $A=\{a_1,a_2,\dots,a_d\}$
**过程**：函数 TreeGenerate($D,A$)

1. 生成节点 node；
2. if $D$ 中样本属于同一类别 $C$ then
3. $\quad$ 将 node 标记为 $C$ 类节点；return
4. end if
5. if $A = \varnothing$ OR $D$ 中样本在 $A$ 上取值相同 then
6. $\quad$ 将 node 标记为叶节点，其类别标记为 $D$ 中样本数最多的类；return
7. end if
8. 从 $A$ 中选择最优划分属性 $a_*$；  //**关键在于如何选择最优划分属性**
9. for $a_*$ 中的每一个值 $a_*^v$ do
10. $\quad$ 为 node 生成一个分支；令 $D_v$ 表示 $D$ 中在 $a_*$ 上取值为 $a_*^v$ 的样本子集；
11. $\quad$ if $D_v$ 为空 then
12. $\quad \quad$ 将分支结点标记为叶节点，其类别标记为 $D$ 中样本最多的类；return
13. $\quad$ else
14. $\quad \quad$ 以 TreeGenerate($D_v,A \setminus \{a_*\}$) 为分支结点
15. $\quad$ end if
16. end for

**输出**： 以 node 为根节点的一棵决策树
___________________

从决策树算法的基本流程可以看出，有以下情形会导致递归返回：
（1）当前结点包含的样本全属于同一类别，无需划分；
（2）当前属性集为空，或者所有样本在所有属性值上取值相同，无法划分；
（3）当前结点包含的样本集合为空，不能划分。

举个栗子：
来自西瓜数据集2

|编号   |色泽   |根蒂   |敲声   |纹理   |脐部   |触感   |好瓜   |
|------|------:|-----:|-----:|------:|----:| -----:|-----:|
|1     |青绿    |蜷缩   |浊响   |清晰   |凹陷   |硬滑   |是     |
|2     |乌黑    |蜷缩   |沉闷   |清晰   |凹陷   |硬滑   |是     |
|3     |乌黑    |蜷缩   |浊响   |清晰   |凹陷   |硬滑   |是     |
|4     |青绿    |蜷缩   |沉闷   |清晰   |凹陷   |硬滑   |是     |
|5     |浅白    |蜷缩   |浊响   |清晰   |凹陷   |硬滑   |是     |
|6     |青绿    |稍蜷   |浊响   |清晰   |稍凹   |软粘   |是     |
|7     |乌黑    |稍蜷   |浊响   |稍糊   |稍凹   |软粘   |是     |
|8     |乌黑    |稍蜷   |浊响   |清晰   |稍凹   |硬滑   |是     |
|9     |乌黑    |稍蜷   |沉闷   |稍糊   |稍凹   |硬滑   |否     |
|10    |青绿    |硬挺   |清脆   |清晰   |平坦   |软粘   |否     |
|11    |浅白    |硬挺   |清脆   |模糊   |平坦   |硬滑   |否     |
|12    |浅白    |蜷缩   |浊响   |模糊   |平坦   |软粘   |否     |
|13    |青绿    |稍蜷   |浊响   |稍糊   |凹陷   |硬滑   |否     |
|14    |浅白    |稍蜷   |沉闷   |稍糊   |凹陷   |硬滑   |否     |
|15    |乌黑    |稍蜷   |浊响   |清晰   |稍凹   |软粘   |否     |
|16    |浅白    |蜷缩   |浊响   |模糊   |平坦   |硬滑   |否     |
|17    |青绿    |蜷缩   |沉闷   |稍糊   |稍凹   |硬滑   |否     |

假设我们以**信息熵**（后面会讲）作为最优划分属性的选择标准，决策树的执行流程如下：
输入：训练集 $D=\{(\boldsymbol x_1, 1),(\boldsymbol x_2, 1), \dots, (\boldsymbol x_{17}, 0) \}$，其中 $\boldsymbol x_i$ 表示编号为 $i$ 的样本在属性集上的取值，$y=0,1$ 分别表示这个西瓜不是或者是好瓜。
属性集 $A=\{ 色泽, 根蒂, 敲声, 纹理, 脐部, 触感 \}$

